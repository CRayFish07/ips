<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../css/mui.min.css">
		<script src="../js/mui.min.js"></script>
		<style>
			html,
			body {
				background-color: #efeff4;
			}
			.mui-content>.mui-table-view:first-child {
				margin-top: 2px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">设置</h1>
		</header>
		<div class="mui-content">
			<ul class="mui-table-view menu" style="margin: 20px 0">
				<li class="mui-table-view-cell mui-media">
					<a href="person-center.html" class="mui-navigate-right">
						<img class="mui-media-object mui-pull-left" src="../img/usr_unlogin.jpg">
						<div class="mui-media-body">
							<span>昵称</span>
							<p class='mui-ellipsis' style="width: 90%;">个性签名个性签名个性签名个性签名个性签名个性签名</p>
						</div>
					</a>
				</li>
			</ul>
			<ul class="mui-table-view menu">
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" href="feedback.html">
						意见反馈
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" href="#share">
						分享给好友
					</a>
				</li>
			</ul>
			<ul class="mui-table-view menu" style="margin-top: 25px;">
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" href="about.html">
						关于我们
					</a>
				</li>
			</ul>
			<ul class="mui-table-view" style="margin-top: 30px;">
				<li class="mui-table-view-cell">
					<a id="logoff" style="text-align: center;color: #FF3B30;">
						退出登录
					</a>
				</li>
			</ul>
		</div>
		<div id="share" class="mui-popover mui-popover-action mui-popover-bottom">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					<a href="#">分享到QQ空间</a>
				</li>
				<li class="mui-table-view-cell">
					<a href="#">分享到微博</a>
				</li>
				<li class="mui-table-view-cell">
					<a href="#">分享到朋友圈</a>
				</li>
			</ul>
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					<a href="#picture"><b>取消</b></a>
				</li>
			</ul>
		</div>
		<script type="text/javascript">
			 //退出登录
			document.querySelector("#logoff").addEventListener('tap', function() {
				plus.nativeUI.showWaiting("正在注销");
				plus.storage.clear();
				plus.nativeUI.closeWaiting();
				mui.toast("注销成功");
			});
			mui("ul").on('tap', 'a', function() {
				var title = null;
				var href = this.href;
				var innerText = this.innerText;
				if (innerText.indexOf("退出") < 0) {
					if (innerText.indexOf("分享") < 0) {
						if (href.indexOf("person") > 0) {
							title = "个人中心";
						} else {
							title = innerText;
						}
						if (innerText.indexOf("意见") >= 0) {
							mui.openWindow({
								url: href,
								waiting: {
									autoShow: true
								}
							});
						} else {
							template = plus.webview.getWebviewById("default-main");
							//获得共用子webview
							subWebview = template.children()[0];
							//通知模板修改标题，并显示隐藏右上角图标；
							mui.fire(template, 'updateHeader', {
								title: title
							});
							if (subWebview.getURL() != href) {
								subWebview.loadURL(href);
							} else {
								subWebview.show();
							}
							template.show('slide-in-right', 150);
						}
					}
				}
			});
			mui('body').on('shown', '.mui-popover', function(e) {
				//console.log('shown', e.detail.id);//detail为当前popover元素
			});
			mui('body').on('hidden', '.mui-popover', function(e) {
				//console.log('hidden', e.detail.id);//detail为当前popover元素
			});
			mui('body').on('tap', '.mui-popover-action li>a', function() {
				var a = this,
					parent;
				//根据点击按钮，反推当前是哪个actionsheet
				for (parent = a.parentNode; parent != document.body; parent = parent.parentNode) {
					if (parent.classList.contains('mui-popover-action')) {
						break;
					}
				}
				//关闭actionsheet
				mui('#' + parent.id).popover('toggle');
				mui.toast("\"" + a.innerText + "\"功能正在紧急修复");
			});
		</script>
	</body>

</html>